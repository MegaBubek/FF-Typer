<!DOCTYPE html><html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FF-Typer</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9f9f9; margin: 0; padding: 0; }
    .container { max-width: 800px; margin: 0 auto; padding: 20px; }
    .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 0 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
    h1, h2 { text-align: center; }
    input, select, button { padding: 10px; margin: 5px 0; width: 100%; }
    .hidden { display: none; }
    .match-row { display: flex; justify-content: space-between; align-items: center; margin: 10px 0; }
    .match-row input { width: 50px; text-align: center; }
    .typy { margin-top: 30px; }
    .typy p { background: #eee; padding: 8px; border-radius: 8px; }
  </style>
</head>
<body>
<div class="container">
  <div id="auth-card" class="card">
    <h1 id="form-title">Rejestracja</h1>
    <input type="text" id="nick" placeholder="Nick" />
    <input type="email" id="email" placeholder="Email" />
    <input type="password" id="password" placeholder="Hasło" />
    <button onclick="register()">Zarejestruj się</button>
    <p><a href="#" onclick="switchToLogin()">Masz konto? Zaloguj się</a></p>
  </div>  <div id="main-card" class="card hidden">
    <h1>FF-Typer</h1>
    <label>Wybierz kolejkę:</label>
    <select id="kolejkaSelect" onchange="renderMatches()"></select>
    <div id="matches"></div>
    <div class="typy">
      <h2>Typy innych graczy</h2>
      <div id="typyInnych"></div>
    </div>
  </div>
</div><script>
const users = JSON.parse(localStorage.getItem('users')) || {};
const loggedInUser = localStorage.getItem('loggedInUser');
const matchData = {
  1: [
    ['Legia', 'Lech'], ['Pogoń', 'Raków'], ['Górnik', 'Widzew'], ['Piast', 'Cracovia'],
    ['Radomiak', 'Zagłębie'], ['Jagiellonia', 'Korona'], ['Ruch', 'Stal'], ['Puszcza', 'Warta'], ['Śląsk', 'ŁKS']
  ],
  2: [
    ['Lech', 'Pogoń'], ['Raków', 'Legia'], ['Cracovia', 'Radomiak'], ['Zagłębie', 'Piast'],
    ['Warta', 'Jagiellonia'], ['Korona', 'Górnik'], ['Widzew', 'Ruch'], ['Stal', 'Puszcza'], ['ŁKS', 'Śląsk']
  ],
  3: [
    ['Legia', 'Piast'], ['Pogoń', 'Cracovia'], ['Górnik', 'Puszcza'], ['Raków', 'Warta'],
    ['Radomiak', 'Korona'], ['Jagiellonia', 'Stal'], ['Ruch', 'ŁKS'], ['Widzew', 'Zagłębie'], ['Lech', 'Śląsk']
  ]
};
for(let i=4;i<=34;i++) matchData[i]=[...Array(9)].map((_,j)=>[`Drużyna ${i}${j}a`,`Drużyna ${i}${j}b`]);

if (loggedInUser) showMain();

function switchToLogin() {
  document.getElementById('form-title').innerText = 'Logowanie';
  document.getElementById('nick').style.display = 'none';
  document.querySelector('button').onclick = login;
  document.querySelector('a').innerText = 'Nie masz konta? Zarejestruj się';
  document.querySelector('a').onclick = switchToRegister;
}

function switchToRegister() {
  document.getElementById('form-title').innerText = 'Rejestracja';
  document.getElementById('nick').style.display = 'block';
  document.querySelector('button').onclick = register;
  document.querySelector('a').innerText = 'Masz konto? Zaloguj się';
  document.querySelector('a').onclick = switchToLogin;
}

function register() {
  const nick = document.getElementById('nick').value;
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;
  if (users[email]) return alert('Użytkownik już istnieje');
  users[email] = {nick, email, password, typy: {}};
  localStorage.setItem('users', JSON.stringify(users));
  localStorage.setItem('loggedInUser', email);
  showMain();
}

function login() {
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;
  if (!users[email] || users[email].password !== password) return alert('Błędny email lub hasło');
  localStorage.setItem('loggedInUser', email);
  showMain();
}

function showMain() {
  document.getElementById('auth-card').classList.add('hidden');
  document.getElementById('main-card').classList.remove('hidden');
  const kolejkaSelect = document.getElementById('kolejkaSelect');
  for (let i = 1; i <= 34; i++) {
    const opt = document.createElement('option');
    opt.value = i;
    opt.innerText = `Kolejka ${i}`;
    kolejkaSelect.appendChild(opt);
  }
  renderMatches();
}

function renderMatches() {
  const k = document.getElementById('kolejkaSelect').value;
  const container = document.getElementById('matches');
  container.innerHTML = '';
  const email = localStorage.getItem('loggedInUser');
  const user = users[email];
  const typy = user.typy[k] || {};
  matchData[k].forEach(([home, away], idx) => {
    const row = document.createElement('div');
    row.className = 'match-row';
    const inputHome = document.createElement('input');
    inputHome.type = 'number';
    inputHome.disabled = typy[idx] !== undefined;
    const inputAway = document.createElement('input');
    inputAway.type = 'number';
    inputAway.disabled = typy[idx] !== undefined;
    if (typy[idx]) {
      inputHome.value = typy[idx][0];
      inputAway.value = typy[idx][1];
    }
    const btn = document.createElement('button');
    btn.innerText = 'Zatwierdź';
    btn.disabled = typy[idx] !== undefined;
    btn.onclick = () => {
      if (!inputHome.value || !inputAway.value) return alert('Wpisz wynik');
      users[email].typy[k] = users[email].typy[k] || {};
      users[email].typy[k][idx] = [inputHome.value, inputAway.value];
      localStorage.setItem('users', JSON.stringify(users));
      renderMatches();
    };
    row.innerHTML = `${home} `;
    row.appendChild(inputHome);
    row.innerHTML += ' : ';
    row.appendChild(inputAway);
    row.innerHTML += ` ${away} `;
    row.appendChild(btn);
    container.appendChild(row);
  });
  renderTypy(k);
}

function renderTypy(k) {
  const typyDiv = document.getElementById('typyInnych');
  typyDiv.innerHTML = '';
  Object.values(users).forEach(user => {
    const userTypy = user.typy[k];
    if (!userTypy) return;
    Object.entries(userTypy).forEach(([idx, val]) => {
      const match = matchData[k][idx];
      const p = document.createElement('p');
      p.innerText = `${user.nick}: ${match[0]} ${val[0]} : ${val[1]} ${match[1]}`;
      typyDiv.appendChild(p);
    });
  });
}
</script></body>
</html>
